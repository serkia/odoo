<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data noupdate="1">

        <record id="slide_email_notification" model="email.template">
            <field name="name">Email Notification for Presentation</field>
            <field name="email_from">${user.email or ''}</field>
            <field name="subject">New ${object.slide_type} has been published on ${object.channel_id.name}</field>
            <field name="model_id" ref="model_slide_slide"/>
            <field name="email_to">${('' if object.partner_id and object.partner_id.email and object.partner_id.email==object.email else object.email|safe)}</field>
            <field name="partner_to">${object.partner_id and object.partner_id.email and object.partner_id.email==object.email and object.partner_id.id or False }</field>
            <field name="auto_delete" eval="True"/>
            <field name="body_html"><![CDATA[
                <div class="snippet_row" style="padding:0px;width:600px;margin:auto;background-color:#fff">
                <table cellpadding="0" cellspacing="0" style="margin: 0 auto;width:600px">
                    <tbody>
                        <tr>
                            <td style="text-align:center" valign="center"><a href="#" style="text-decoration:none"><img alt="Awesome Co" src="${ctx['base_url']}/logo.png" style="padding:10px;height:auto;max-width:600px"> </a></td>
                        </tr>
                    </tbody>
                </table>
                </div>

                <div class="snippet_row" style="padding: 20px 0px; width: 600px; margin: auto; color: #fff;background-color:#a24689;">
                <table cellpadding="0" cellspacing="0" class="force-full-width" style="width:600px;">
                    <tbody>
                        <tr>
                            <td style="text-align:center;padding:5px;" valign="center">
                            <h4 style="margin:0px;">${ctx['message']}</h4>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </div>

                <div class="snippet_row" style="padding:0px;width:600px;margin:auto;background-color:#FFFFFF;color:#8f8f8f">
                <table cellpadding="0" cellspacing="0">
                    <tbody>
                        <tr>
                            <td class="col_mv" style="vertical-align:top;text-align:center;background-color:#FFFFF;color:#414141">
                                %if ctx['access_url']:
                                    <a href="${ctx['access_url']}" style="color:#a24689">
                                % endif
                                %if not ctx['access_url']:
                                    <a href="${object.get_share_url() | safe}" style="color:#a24689">
                                %endif
                                    % if ctx['image_url']:
                                        <img alt="${object.name}" src="${ctx['image_url']}" style="height:auto;width:600px;background-color: #ccc;margine: 0px auto 10px auto">
                                    % endif
                                    % if not ctx['image_url']:
                                        <img alt="${object.name}" src="/website/image/slide.slide/${object.id}/image_medium" style="height:auto;width:600px;background-color: #ccc;margine: 0px auto 10px auto">
                                    % endif
                                </a>
                                <br>
                                <br>
                                <span class="colpick" style="font-size:24px;font-weight:bold">${object.name}</span>
                                <div class="colpick" style="color: #ccc">Published on ${object.write_date}, ${object.total_views} views</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
                </div>
                
                <br>
                <br>

                <div class="snippet_row" style="padding:0px;width:600px;margin:auto;background-color:#8f8f8f;color:#fff">
                <table cellpadding="0" cellspacing="0" style="margin: 0 auto;width:100%">
                    <tbody>
                        <tr>
                            <td style="font-size:12px;text-align:center;padding-top:10px;color:#a24689;padding-bottom:5px">
                            %if ctx['access_url']:
                                <a href="${ctx['access_url']}" style="color:#a24689">View in browser</a> | 
                                <a href="${ctx['access_url']}" style="color:#a24689">Unsubscribe</a> | 
                            % endif
                            %if not ctx['access_url']:
                                <a href="${object.get_share_url() | safe}" style="color:#a24689">View in browser</a> | 
                                <a href="${object.get_share_url() | safe}" style="color:#a24689">Unsubscribe</a> | 
                            % endif
                            <a href="#" style="color:#a24689">Contact</a></td>
                        </tr>
                        <tr>
                            <td style="font-size:12px;text-align:center;padding-bottom:35px">2014 All Rights Reserved</td>
                        </tr>
                    </tbody>
                </table>
                </div>
            ]]>
            </field>
        </record>

        <record model="slide.channel" id="dir_public">
            <field name="name">Public Channel</field>
            <field name="promote">mostview</field>
            <field name="template_id" ref="website_slides.slide_email_notification"/>
            <field name="website_published" eval="True"/>
            <field name="visibility">public</field>
            <field name="description">Public channel is default channel for slides, all public user can access content of public channel.</field>
        </record>

        <record model="slide.channel" id="dir_private">
            <field name="name">Partner Channel</field>
            <field name="template_id" ref="website_slides.slide_email_notification"/>
            <field name="website_published" eval="True"/>
            <field name="group_ids" eval="[(4, ref('base.group_portal'))]"/>
            <field name="visibility">group</field>
            <field name="description">Partner channel use to publish slides in partner network privately.</field>
        </record>
        
        <record model="slide.channel" id="dir_employee">
            <field name="name">Employee Channel</field>
            <field name="template_id" ref="website_slides.slide_email_notification"/>
            <field name="website_published" eval="True"/>
            <field name="group_ids" eval="[(4, ref('base.group_user'))]"/>
            <field name="visibility">private</field>
            <field name="description">Employee channel use to publish internal slides of company.</field>
        </record>

        <!-- Channel subtypes -->
        <record id="new_slides" model="mail.message.subtype">
            <field name="name">Presentation Published</field>
            <field name="res_model">slide.channel</field>
            <field name="default" eval="True"/>
            <field name="description">Presentation Published</field>
        </record>

        <!-- Channel subtypes -->
        <record id="new_slides_validation" model="mail.message.subtype">
            <field name="name">Presentation Validations</field>
            <field name="res_model">slide.channel</field>
            <field name="default" eval="False"/>
            <field name="description">Presentation Validations</field>
        </record>

    </data>
</openerp>
