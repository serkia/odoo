<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="assets_editor" inherit_id="website.assets_editor" name="Twitter wall Editor">
            <xpath expr="." position="inside">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.editor.js"></script>
            </xpath>
        </template>
        
        <template id="twitter_wall_footer_custom" inherit_id="website.footer_default" name="Footer Twitter Wall Link">
            <xpath expr="//div[@id='info']/ul" position="inside">
                <li><a href="/twitter_walls">Twitter Wall</a></li>
            </xpath>
        </template>

        <template id="assets_frontend" inherit_id="website.assets_frontend" name="Slide">
          <xpath expr="." position="inside">
                <link type="text/less" href="/website_twitter_wall/static/src/less/website_twitter_wall.less" rel="stylesheet" t-ignore="true"/>
                <link type="text/stylesheet" rel="stylesheet" href="/website_twitter_wall/static/src/css/website_twitter_wall.css"></link>
          </xpath>
        </template>

        <template id="website_twitter_wall.twitter_thumb_wall" name="Twitter Wall">
            <div class="col-md-4">
                <div t-attf-class="wall-dislay-box mt16 mb16">
                    <span class="wall-image-box">
                        <a t-attf-href="/twitter_wall/#{wall.id}">
                            <img src="/website/image/ir.attachment/81/datas" class="img-responsive" style="width: 100%;"/>
                        </a>
                    </span>
                    <div style="padding: 10px;">
                        <div class="mb8 mt0">
                            <div class="wall-title-text-truncation pull-left">
                                <div t-esc="wall.name" class="h3 mt0" style="text-overflow: ellipsis;overflow: hidden;"/>
                            </div>
                            <div class="btn-group pull-right">
                                <a t-attf-href="/twitter_wall/story/#{wall.id}" class="btn btn-default" t-if="wall.twitter_access_token">
                                   <i class="fa fa-arrows-alt"></i>
                                </a>
                                <a t-attf-href="/twitter_wall/story/#{wall.id}" class="btn btn-default" t-if="wall.state == 'streaming'">
                                   <i class="fa fa-archive"></i>
                                </a>
                            </div>
                        </div>
                        <t t-if="wall.description">
                            <div class="wall-title-text-truncation " style="width: 100%;">
                                <p t-field="wall.description" class="mb16" style="text-overflow: ellipsis;overflow: hidden;"/>
                            </div>
                        </t>
                        <div class="mb8">
                            <div t-if="not wall.twitter_access_token and not is_public_user" class="pull-left">
                                <a t-attf-href="/twitter_wall/authenticate/#{wall.id}"><i class="fa fa-arrow-right"></i> Verify with Twitter Account</a> 
                            </div>
                            <div class="pull-left">
                                <t t-if="wall.state == 'streaming'">
                                    <span class="label label-success" style="font-size:100%">Live Event</span>
                                </t>
                                <t t-if="wall.state == 'story'">
                                    <span class="label label-info" style="font-size:100%">Storify</span>
                                </t>
                            </div>
                            <div class="pull-right">
                                <t t-call="website.publish_management">
                                    <t t-set="object" t-value="wall"/>
                                    <t t-set="publish_edit" t-value="True"/>
                                </t>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
        
        <template id="website_twitter_wall.twitter_walls" name="Twitter Walls">
            <t t-set="head">
                <script type="text/javascript" src="/website_twitter_wall/static/src/js/website_twitter_wall.js"></script>
            </t>
            <t t-call="website.layout">
                <div class="wrap">
                    <div class="container">
                        <div class="row">
                            <t t-if="message">
                                <div class="alert alert-success" role="alert"><t t-esc="message"/></div>
                            </t>
                            <t t-foreach="walls" t-as="wall">
                                <t t-call="website_twitter_wall.twitter_thumb_wall"/>
                            </t>
                        </div>
                    </div>
                </div>
            </t>
        </template>

        <template id="website_twitter_wall.twitter_wall_archieve" name="Archieved Wall">
            <t t-set="head">
                <script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
            </t>
            <t t-call="website.layout">
                <div style="height: 500px; background-image: url(/website/image/ir.attachment/81/datas);">
                    <div style="height: 500px; background-color: rgba(47,52,64,0.3);">
                        <div class="container">
                            <h1 class="mt32 wall-arch-title"><t t-esc="wall.name"/></h1>
                            <p class="mt32 wall-arch-subtitle" style="line-height: 2em;font-size: 120%;">
                                <t t-esc="wall.description"/>
                            </p>
                        </div>
                    </div>
                </div>

                <nav class="navbar navbar-default" role="navigation">
                    <div class="container">
                        <div class="container-fluid">
                            <ul class="nav navbar-nav">
                                <li>
                                    <p class="navbar-text mb0">3 Months ago</p>
                                </li>
                                <li>
                                    <p class="navbar-text mb0">1000 total views</p>
                                </li>
                            </ul>
                            <ul class="nav navbar-nav navbar-right">
                                <li>
                                    <a class="navbar-text mt0 mb0"><i class="fa fa-code"></i> Embed</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
                <div class="container">
                    <div class="row">
                        <center>
                            <t t-set="counter" t-value="True"/>
                            <ul class="timeline">
                                <t t-foreach="tweets" t-as="tweet">
                                    <t t-if="counter">
                                        <li>
                                            <div class="timeline-badge primary">
                                                <a>
                                                    <i class="glyphicon glyphicon-record" rel="tooltip" title="11 hours ago via Twitter">
                                                        
                                                    </i>
                                                </a>
                                            </div>
                                            <div class="timeline-panel">
                                                <div class="left-item">
                                                    <t t-raw="tweet.html_description"/>
                                                </div>
                                            </div>
                                        </li>
                                    </t>
                                    <t t-if="not counter">
                                        <li class="timeline-inverted">
                                            <div class="timeline-badge primary">
                                                <a>
                                                    <i class="glyphicon glyphicon-record invert" rel="tooltip" title="11 hours ago via Twitter" id="">
                                                        
                                                    </i>
                                                </a>
                                            </div>
                                            <div class="timeline-panel">
                                                <div class="right-item">
                                                    <t t-raw="tweet.html_description"/>
                                                </div>
                                            </div>
                                        </li>
                                    </t>
                                    <t t-set="counter" t-value="wall.check(counter)"/>
                                </t>
                            </ul>
                        </center>
                    </div>

                    <div class="row text-center">
                        <t t-call="website.pager"/>
                    </div>
                </div>
            </t>
        </template>

        <!-- Page that display walls -->
        <template id="twitter_wall" name="Twitter Wall Tweet">
            <t t-call="website.layout">
                <t t-set="head">
                    <script type="text/javascript">
                        openerp.qweb.add_template('/website_twitter_wall/static/src/xml/website_twitter_wall.xml');
                    </script>
                    <script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
                    <link rel="stylesheet"
                        href="/website_twitter_wall/static/src/css/website_twitter_wall.css"
                        type="text/css" />
                    <script type="text/javascript"
                        src="/website_twitter_wall/static/src/js/website_twitter_wall.js"></script>
                </t>
                <div class="full_screen" name="tweets_for_client" t-attf-style="background-image: url('data:image/jpg;base64, #{back_image}')">
                    <div class="container" t-att-wall_id="wall_id">
                        <div class="row">
                            <center>
                                <div class="col-sm-12" id="tweet_wall_div">

                                </div>
                            </center>
                        </div>
                    </div>
                    <nav class="navbar navbar-default navbar-fixed-bottom" role="navigation">
                        <div class="container">
                            <div class="container-fluid">
                                <div class="navbar-header">
                                    <p class="navbar-text mb0">
                                        Tweet us: <label class="label label-danger"># opendays</label>
                                    </p>
                                </div>
                                <ul class="nav navbar-nav navbar-right">
                                    <li>
                                        <p class="navbar-text mb0">Twitter wall powered by Odoo.</p>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </nav>
                </div>
            </t>
        </template>

        <template id="content_new_twitter_wall" inherit_id="website.user_navbar">
            <xpath expr="//ul[@id='oe_systray']/li/ul[@class='dropdown-menu oe_content_menu']" position="inside">
                 <li><a href="#" data-action="new_twitter_wall">New Twitter Wall</a></li>
            </xpath>
        </template>

    
    </data>
</openerp>
